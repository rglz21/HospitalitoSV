/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package sv.edu.udb.ManagedBean;

import java.util.Date;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import sv.edu.udb.DAO.ConsultaDAO;
import sv.edu.udb.DAO.ExpedienteDAO;
import sv.edu.udb.DAO.MedicosDAO;
import sv.edu.udb.DAO.UtilDAO;
import sv.edu.udb.entites.Citas;
import sv.edu.udb.entites.Consulta;
import sv.edu.udb.entites.Expediente;
import sv.edu.udb.entites.Medicos;

/**
 *
 * @author HP Probook
 */
@ManagedBean
@SessionScoped
public class ConsultaBean {
    private int idConsulta;
    private Expediente idExpe;
    private String descripcion;
    private Date fecha=new Date();
    private String diagnostico;
    private Medicos idMedico;
    private int cita;
    /**
     * Creates a new instance of ConsultaBean
     */
    public ConsultaBean() {
    }
    public void addConsulta(Citas citaO){
        UtilDAO utilDao=new UtilDAO();
        ConsultaDAO conDao=new ConsultaDAO();
        MedicosDAO medDao=new MedicosDAO();
        ExpedienteDAO expDao=new ExpedienteDAO();
        String idPac=citaO.getPaciente().getIdPaciente();
        System.out.println(idPac);
        idExpe=expDao.obtenerExpdiente(citaO.getPaciente().getIdPaciente());
        idMedico=medDao.getMedicos1(citaO.getMedicos().getIdMedico());
        int ccon=utilDao.contar("Consulta","idConsulta");
        int ncon=++ccon;
        Consulta con=new Consulta(ncon, idExpe, getDescripcion(), fecha, getDiagnostico(), idMedico.getIdMedico(), citaO.getIdCita());
        conDao.addConsulta(con);
    }
    public void obtenerConsulta(int idCita){
        ConsultaDAO conDao=new ConsultaDAO();
        Consulta con=conDao.ObtenerConsultaByCita(idCita);
        Medicos medi=new Medicos();
        if(con!=null){
            medi.setIdMedico(con.getIdMedico());
            setIdConsulta(con.getIdConsulta());
            setIdExpe(con.getExpediente());
            setDescripcion(con.getDescripcion());
            setFecha(con.getFecha());
            setDiagnostico(con.getDiagnostico());
            setIdMedico(medi);
            setCita(con.getIdCita());
        }
    }
    /**
     * @return the idConsulta
     */
    public int getIdConsulta() {
        return idConsulta;
    }

    /**
     * @param idConsulta the idConsulta to set
     */
    public void setIdConsulta(int idConsulta) {
        this.idConsulta = idConsulta;
    }

    /**
     * @return the idExpe
     */
    public Expediente getIdExpe() {
        return idExpe;
    }

    /**
     * @param idExpe the idExpe to set
     */
    public void setIdExpe(Expediente idExpe) {
        this.idExpe = idExpe;
    }

    /**
     * @return the descripcion
     */
    public String getDescripcion() {
        return descripcion;
    }

    /**
     * @param descripcion the descripcion to set
     */
    public void setDescripcion(String descripcion) {
        this.descripcion = descripcion;
    }

    /**
     * @return the fecha
     */
    public Date getFecha() {
        return fecha;
    }

    /**
     * @param fecha the fecha to set
     */
    public void setFecha(Date fecha) {
        this.fecha = fecha;
    }

    /**
     * @return the diagnostico
     */
    public String getDiagnostico() {
        return diagnostico;
    }

    /**
     * @param diagnostico the diagnostico to set
     */
    public void setDiagnostico(String diagnostico) {
        this.diagnostico = diagnostico;
    }

    /**
     * @return the idMedico
     */
    public Medicos getIdMedico() {
        return idMedico;
    }

    /**
     * @param idMedico the idMedico to set
     */
    public void setIdMedico(Medicos idMedico) {
        this.idMedico = idMedico;
    }

    /**
     * @return the cita
     */
    public int getCita() {
        return cita;
    }

    /**
     * @param cita the cita to set
     */
    public void setCita(int cita) {
        this.cita = cita;
    }
    
}
